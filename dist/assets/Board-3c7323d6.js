import{j as e,c as o,r as p,a as N}from"./index-d6419b83.js";import{u as w,S as h,v as k,T as j,a as S,b as O,D as C,h as D,c as F,P as T}from"./TaskCard-9ad19bdb.js";import{u as f}from"./store-70d728d0.js";import{u as P,I as s,q as m}from"./hooks-cebd3020.js";const A={backlog:"bg-gray-100","backlog-verification":"bg-blue-50",procurement:"bg-yellow-50","procurement-verification":"bg-yellow-100",construction:"bg-orange-50","construction-verification":"bg-orange-100",handover:"bg-green-50",done:"bg-green-100"};function B({title:r,stage:a,tasks:l}){const{setNodeRef:c,isOver:d}=w({id:a});return e.jsxs("div",{ref:c,className:o("flex flex-col flex-1 min-w-[320px] h-full rounded-lg shadow-sm",A[a],d&&"ring-2 ring-orange-500 ring-opacity-50"),children:[e.jsxs("div",{className:"p-4 font-medium text-gray-700 border-b bg-white/50",children:[e.jsx("h3",{className:"text-lg",children:r}),e.jsxs("div",{className:"mt-1 text-sm text-gray-500 font-normal",children:[l.length," ",l.length===1?"task":"tasks"]})]}),e.jsx("div",{className:"flex-1 p-3 overflow-y-auto",children:e.jsx(h,{items:l.map(n=>n.id),strategy:k,children:e.jsx("div",{className:"space-y-3",children:l.map(n=>e.jsx(j,{task:n},n.id))})})})]})}function E(){var n;const{filters:r,setFilter:a,resetFilters:l,projects:c,provinces:d}=P();return e.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[e.jsx("div",{className:"min-w-[200px]",children:e.jsx(s,{value:r.project,onChange:t=>a("project",t),children:e.jsxs("div",{className:"relative",children:[e.jsx(s.Button,{className:"relative w-full cursor-pointer rounded-lg bg-white py-2 pl-3 pr-10 text-left border focus:outline-none focus-visible:border-orange-500 focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-orange-300 sm:text-sm",children:e.jsx("span",{className:"block truncate",children:r.project||"All Projects"})}),e.jsx(m,{as:p.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsxs(s.Options,{className:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm z-10",children:[e.jsx(s.Option,{value:null,className:({active:t})=>o("relative cursor-default select-none py-2 pl-10 pr-4",t?"bg-sekolah-100 text-sekolah-900":"text-gray-900"),children:"All Projects"}),c.map(t=>e.jsx(s.Option,{value:t,className:({active:u})=>o("relative cursor-default select-none py-2 pl-10 pr-4",u?"bg-orange-100 text-orange-900":"text-gray-900"),children:t},t))]})})]})})}),e.jsx("div",{className:"min-w-[200px]",children:e.jsx(s,{value:r.province,onChange:t=>a("province",t),children:e.jsxs("div",{className:"relative",children:[e.jsx(s.Button,{className:"relative w-full cursor-pointer rounded-lg bg-white py-2 pl-3 pr-10 text-left border focus:outline-none focus-visible:border-orange-500 focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-orange-300 sm:text-sm",children:e.jsx("span",{className:"block truncate",children:r.province?((n=d.find(t=>t.id===r.province))==null?void 0:n.name)||r.province:"All Provinces"})}),e.jsx(m,{as:p.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsxs(s.Options,{className:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm z-10",children:[e.jsx(s.Option,{value:null,className:({active:t})=>o("relative cursor-default select-none py-2 pl-10 pr-4",t?"bg-sekolah-100 text-sekolah-900":"text-gray-900"),children:"All Provinces"}),d.map(t=>e.jsx(s.Option,{value:t.id,className:({active:u})=>o("relative cursor-default select-none py-2 pl-10 pr-4",u?"bg-orange-100 text-orange-900":"text-gray-900"),children:t.name},t.id))]})})]})})}),e.jsx("div",{className:"min-w-[200px]",children:e.jsx(s,{value:r.sprint,onChange:t=>a("sprint",t),children:e.jsxs("div",{className:"relative",children:[e.jsx(s.Button,{className:"relative w-full cursor-pointer rounded-lg bg-white py-2 pl-3 pr-10 text-left border focus:outline-none focus-visible:border-orange-500 focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-orange-300 sm:text-sm",children:e.jsx("span",{className:"block truncate",children:r.sprint?r.sprint==="sprint-1"?"Sprint 1 - October 2025":r.sprint==="sprint-2"?"Sprint 2 - November 2025":"Sprint 3 - December 2025":"All Sprints"})}),e.jsx(m,{as:p.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsxs(s.Options,{className:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm z-10",children:[e.jsx(s.Option,{value:null,className:({active:t})=>o("relative cursor-default select-none py-2 pl-10 pr-4",t?"bg-orange-100 text-orange-900":"text-gray-900"),children:"All Sprints"}),e.jsx(s.Option,{value:"sprint-1",className:({active:t})=>o("relative cursor-default select-none py-2 pl-10 pr-4",t?"bg-orange-100 text-orange-900":"text-gray-900"),children:"Sprint 1 - October 2025"}),e.jsx(s.Option,{value:"sprint-2",className:({active:t})=>o("relative cursor-default select-none py-2 pl-10 pr-4",t?"bg-orange-100 text-orange-900":"text-gray-900"),children:"Sprint 2 - November 2025"}),e.jsx(s.Option,{value:"sprint-3",className:({active:t})=>o("relative cursor-default select-none py-2 pl-10 pr-4",t?"bg-orange-100 text-orange-900":"text-gray-900"),children:"Sprint 3 - December 2025"})]})})]})})}),e.jsx("button",{onClick:l,className:"px-4 py-2 text-sm bg-orange-500 text-white hover:bg-orange-600 rounded-lg",children:"Reset Filters"})]})}const b=[{id:"backlog",title:"Backlog"},{id:"backlog-verification",title:"Backlog Verification"},{id:"procurement",title:"Procurement"},{id:"procurement-verification",title:"Procurement Verification"},{id:"construction",title:"Construction"},{id:"construction-verification",title:"Construction Verification"},{id:"handover",title:"Handover"},{id:"done",title:"Done"}];function q(){const[r,a]=p.useState(null),l=S(O(T,{activationConstraint:{distance:8}})),c=f(i=>i.getFilteredTasks()),d=f(i=>i.moveTask),n=r?c.find(i=>i.id===r):null;function t(i){a(i.active.id)}function u(i){const{active:g,over:x}=i;if(x&&g.id!==x.id){const v=c.find(y=>y.id===g.id);v&&d(v.id,x.id)}a(null)}return e.jsxs("div",{className:"h-[calc(100vh-8rem)] flex flex-col",children:[e.jsx(E,{}),e.jsxs(C,{sensors:l,onDragStart:t,onDragEnd:u,children:[e.jsx("div",{className:"flex-1 flex gap-6 overflow-x-auto pb-4 mt-4",children:e.jsx(h,{items:b.map(i=>i.id),strategy:D,children:b.map(i=>e.jsx(B,{title:i.title,stage:i.id,tasks:c.filter(g=>g.stage===i.id)},i.id))})}),"                ",N.createPortal(e.jsx(F,{children:n&&e.jsx(j,{task:n})}),document.body)]})]})}export{q as default};
