import{r as y,j as e}from"./index-d6419b83.js";import{u as S}from"./store-70d728d0.js";function x({provinces:s,metric:c,getValue:n,formatValue:h=r=>`${r.toFixed(1)}%`,className:o="",sortAscending:w=!1}){const[r,l]=y.useState(null),t=y.useRef(null);return y.useEffect(()=>{const a=t.current;if(!a)return;const i=a.getContext("2d");if(!i)return;i.clearRect(0,0,a.width,a.height);const k=[...s].sort((d,g)=>w?n(d)-n(g):n(g)-n(d)),P=Math.max(...s.map(n)),E=(a.height-60)/P,v=(a.width-40)/s.length,N=2,I=d=>{const g=a.getBoundingClientRect(),m=d.clientX-g.left,j=d.clientY-g.top,f=Math.floor((m-20)/v),u=k[f];if(u&&m>=20&&m<=a.width-20){const p=n(u)*E,b=a.height-30-p;if(j>=b&&j<=a.height-30){l(u);return}}l(null)};return a.addEventListener("mousemove",I),k.forEach((d,g)=>{const m=n(d),j=m*E,f=20+g*v,u=a.height-30-j;if(i.fillStyle=d===r?"#0ea5e9":C(m,P),i.fillRect(f,u,v-N,j),i.fillStyle="#374151",i.font="10px Inter, system-ui, sans-serif",i.textAlign="center",i.fillText(h(m),f+(v-N)/2,u-4),i.save(),i.translate(f+(v-N)/2,a.height-10),i.rotate(-Math.PI/4),i.fillText(d.name,0,0),i.restore(),d===r){const R=f+(v-N)/2,p=u-20,b=`${d.name}: ${h(m)}`,T=i.measureText(b).width+16,A=24;i.fillStyle="#1f2937",i.beginPath(),i.roundRect(R-T/2,p-A,T,A,4),i.fill(),i.fillStyle="#ffffff",i.fillText(b,R,p-A/2+4)}}),()=>{a.removeEventListener("mousemove",I)}},[s,c,n,h,w,r]),e.jsx("div",{className:o,children:e.jsx("canvas",{ref:t,width:800,height:400,className:"w-full h-auto"})})}function C(s,c){const n=s/c;return n>=.75?"#22c55e":n>=.5?"#f97316":n>=.25?"#eab308":"#ef4444"}function z(){const{provinces:s,tasks:c}=S(),[n,h]=y.useState("economics"),[o,w]=y.useState({gdp:!1,unemployment:!1,poverty:!1,infrastructure:!1,urbanization:!1,internet:!1,literacy:!1,enrollment:!1,teacherRatio:!1}),r={total:c.length,backlog:c.filter(t=>t.stage==="backlog").length,backlogVerification:c.filter(t=>t.stage==="backlog-verification").length,procurement:c.filter(t=>t.stage==="procurement").length,procurementVerification:c.filter(t=>t.stage==="procurement-verification").length,construction:c.filter(t=>t.stage==="construction").length,constructionVerification:c.filter(t=>t.stage==="construction-verification").length,handover:c.filter(t=>t.stage==="handover").length,done:c.filter(t=>t.stage==="done").length},l={avgGDP:s.reduce((t,a)=>t+a.indicators.gdp,0)/s.length,avgUnemployment:s.reduce((t,a)=>t+a.indicators.unemployment,0)/s.length,avgPovertyRate:s.reduce((t,a)=>t+a.indicators.povertyRate,0)/s.length,avgInfrastructure:s.reduce((t,a)=>t+a.indicators.infrastructureIndex,0)/s.length,avgUrbanization:s.reduce((t,a)=>t+a.indicators.urbanizationRate,0)/s.length,avgInternet:s.reduce((t,a)=>t+a.indicators.internetAccess,0)/s.length,avgLiteracy:s.reduce((t,a)=>t+a.indicators.literacyRate,0)/s.length,avgEnrollment:s.reduce((t,a)=>t+a.indicators.schoolEnrollment,0)/s.length,avgTeacherRatio:s.reduce((t,a)=>t+a.indicators.teacherRatio,0)/s.length};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Province Overview"}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Task Overview"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Total Tasks"}),e.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:r.total})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Backlog"}),e.jsx("span",{className:"font-medium",children:r.backlog})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Backlog Verification"}),e.jsx("span",{className:"font-medium",children:r.backlogVerification})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Procurement"}),e.jsx("span",{className:"font-medium",children:r.procurement})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Procurement Verification"}),e.jsx("span",{className:"font-medium",children:r.procurementVerification})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Construction"}),e.jsx("span",{className:"font-medium",children:r.construction})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Construction Verification"}),e.jsx("span",{className:"font-medium",children:r.constructionVerification})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Handover"}),e.jsx("span",{className:"font-medium",children:r.handover})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Done"}),e.jsx("span",{className:"font-medium",children:r.done})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Economic Overview"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Average GDP Growth"}),e.jsxs("div",{className:"text-2xl font-semibold text-gray-900",children:[l.avgGDP.toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Average Unemployment"}),e.jsxs("div",{className:"text-2xl font-semibold text-gray-900",children:[l.avgUnemployment.toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Average Poverty Rate"}),e.jsxs("div",{className:"text-2xl font-semibold text-gray-900",children:[l.avgPovertyRate.toFixed(1),"%"]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Development Overview"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Average Infrastructure Index"}),e.jsxs("div",{className:"text-2xl font-semibold text-gray-900",children:[l.avgInfrastructure.toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Average Urbanization Rate"}),e.jsxs("div",{className:"text-2xl font-semibold text-gray-900",children:[l.avgUrbanization.toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Average Internet Access"}),e.jsxs("div",{className:"text-2xl font-semibold text-gray-900",children:[l.avgInternet.toFixed(1),"%"]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Education Overview"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Average Literacy Rate"}),e.jsxs("div",{className:"text-2xl font-semibold text-gray-900",children:[l.avgLiteracy.toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Average School Enrollment"}),e.jsxs("div",{className:"text-2xl font-semibold text-gray-900",children:[l.avgEnrollment.toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Average Teacher Ratio"}),e.jsxs("div",{className:"text-2xl font-semibold text-gray-900",children:["1:",l.avgTeacherRatio.toFixed(1)]})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Province Performance Charts"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>h("economics"),className:`px-4 py-2 text-sm font-medium rounded-lg ${n==="economics"?"bg-sekolah-100 text-sekolah-900":"text-gray-500 hover:text-gray-900 hover:bg-gray-50"}`,children:"Economics"}),e.jsx("button",{onClick:()=>h("infrastructure"),className:`px-4 py-2 text-sm font-medium rounded-lg ${n==="infrastructure"?"bg-sekolah-100 text-sekolah-900":"text-gray-500 hover:text-gray-900 hover:bg-gray-50"}`,children:"Infrastructure"}),e.jsx("button",{onClick:()=>h("education"),className:`px-4 py-2 text-sm font-medium rounded-lg ${n==="education"?"bg-sekolah-100 text-sekolah-900":"text-gray-500 hover:text-gray-900 hover:bg-gray-50"}`,children:"Education"})]})]}),e.jsxs("div",{className:"space-y-6",children:[n==="economics"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(x,{provinces:s,metric:"GDP Growth Rate",getValue:t=>t.indicators.gdp,sortAscending:o.gdp}),e.jsx(x,{provinces:s,metric:"Unemployment Rate",getValue:t=>t.indicators.unemployment,sortAscending:o.unemployment}),e.jsx(x,{provinces:s,metric:"Poverty Rate",getValue:t=>t.indicators.povertyRate,sortAscending:o.poverty})]}),n==="infrastructure"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(x,{provinces:s,metric:"Infrastructure Index",getValue:t=>t.indicators.infrastructureIndex,sortAscending:o.infrastructure}),e.jsx(x,{provinces:s,metric:"Urbanization Rate",getValue:t=>t.indicators.urbanizationRate,sortAscending:o.urbanization}),e.jsx(x,{provinces:s,metric:"Internet Access",getValue:t=>t.indicators.internetAccess,sortAscending:o.internet})]}),n==="education"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(x,{provinces:s,metric:"Literacy Rate",getValue:t=>t.indicators.literacyRate,sortAscending:o.literacy}),e.jsx(x,{provinces:s,metric:"School Enrollment",getValue:t=>t.indicators.schoolEnrollment,sortAscending:o.enrollment}),e.jsx(x,{provinces:s,metric:"Student-Teacher Ratio",getValue:t=>t.indicators.teacherRatio,sortAscending:o.teacherRatio})]})]})]})]})}export{z as default};
